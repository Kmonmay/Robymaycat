<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Fish List - Robymaycat Aquarium</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <h1>üê† Fish List</h1>
    <p class="subtitle">All fish everyone has drawn</p>
  </header>

  <main>
    <div id="fishGallery" style="display:flex;flex-wrap:wrap;justify-content:center;gap:10px;"></div>
    <button id="backBtn" style="margin-top:30px;">‚¨ÖÔ∏è Back</button>
  </main>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    const app = initializeApp({
      apiKey: "AIzaSyDwJ__tUXNhDhuyfEH4nxf1DoiAeiMA20o",
      authDomain: "robymaycat.firebaseapp.com",
      databaseURL: "https://robymaycat-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "robymaycat"
    });

    const db = getDatabase(app);
    const fishGallery = document.getElementById("fishGallery");

    async function loadFishList() {
      const snapshot = await get(ref(db, "fishes"));
      if (!snapshot.exists()) {
        fishGallery.innerHTML = "<p>No fish yet üêæ</p>";
        return;
      }
      const fishes = Object.values(snapshot.val()).reverse(); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô
      fishes.forEach(f => {
        const img = document.createElement("img");
        img.src = f.image;
        img.style.width = "120px";
        img.style.borderRadius = "8px";
        img.style.boxShadow = "0 2px 6px rgba(0,0,0,0.2)";
        fishGallery.appendChild(img);
      });
    }
    loadFishList();

    document.getElementById("backBtn").addEventListener("click", () => {
      window.location.href = "index.html";
    });
  </script>
</body>
</html>
